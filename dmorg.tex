\section{Data Management Organizational Structure}

This section defines the organizational structure during the period in which the DM  Subsystem is developed and commissioned, up to the start of \VRO ~operations.

The DM Project Manager (William O'Mullane), Deputy Project Manager (Frossie Economou) and DM  Subsystem Scientist (Leanne Guy), who are known collectively as DM  Management, lead the DM  Subsystem.
The Project Manager has direct responsibility for coordination with the overall \VRO~ Project Office, the \VRO~ Change Control Board, the LSST Corporation, and \VRO~ partner organizations on all budgetary, schedule, and resource matters.
The Subsystem Scientist has primary scientific and technical responsibility within the subsystem and responsibility for ensuring that the scientific requirements of the observatory are supported and is a member of the \VRO~ Project Science Team (PST).

DM  views its deliverables as hierarchical tree of \textit{products}, as described in \secref{sect:products}.
The subsystem organization is based around groups which are responsible for the highest levels of that product tree (corresponding to Work Breakdown Structure elements at the third level, i.e. \textit{1.02C.n}; refer to \secref{sect:WBS}).
This is illustrated in \figref{fig:dmorg}.

\begin{figure}[htbp]
\begin{center}
 \includegraphics[width=\textwidth]{images/DmOrg}
\caption{DM  organization. \label{fig:dmorg}}
\end{center}
\end{figure}

\subsection {Meetings} \label{sect:meetings}

As a diverse and distributed organization DM staff will participate in a considerable number of meetings.
NSF and Aura have many rules on meeting attendance and the project keeps policies updated accordingly in \citeds{LPM-191} and \citeds{Document-13760}. This includes the travel summary report template \citedsp{Document-13762} every traveler must fill after attending a meeting.

The DMLT  (\secref{sect:dmlt}) may, on occasion, require that travelers to a specific meeting of direct interest provide a detailed debriefing note or presentation.

\subsection {Working Groups} \label{sect:wgs}

The regular decision making process within DM is based on individual empowerment and a mechanism to develop consensus.
This ``RFC'' process is described in Appendix \ref{sect:ddmp}.

However, some issues in development of a system like \gls{Data Management} require more effort to resolve than can be reasonably addressed through an RFC .
When required, the DM PM  will address these issues through the creation of a short-lived ``working group''.
The working group will be given a specific narrow charge, it will be a small group (of perhaps around seven people), its activities will be bounded in time, and it will have a clear deliverable.
Members of the group will be agreed by the DMLT (\secref{sect:dmlt}) to provide the best technical input from the perspective of all stakeholders.
Since most members of DM have their time scheduled in advance (following the procedure described in \secref{sect:plan}), it is important to consider the impact of \gls{WG} activities on the overall DM schedule.
In particular, the consent of the relevant \gls{T/CAM} should be obtained before a member of their teams is added to a working group.
Members of the working group should discuss in their local organizations and socialize recommendations ahead of adoption.

The working group charge will be ``RFC''ed in the usual manner to reach an agreed version and to broadly communicate the formation of the \gls{WG}.
The RFCs for working groups are considered automatically flagged (i.e., not
subject to self-adoption); typically, the DMPM  will adopt them by executive
decision after consulting the DMLT .  The adopted version of the charge will be issued as an LDM document.

\subsection {External Studies} \label{sect:studies}

The DMPM  may initiate or request studies by external parties to investigate or report on technological or other choices facing the DM subsystem.

\subsection {Document Management} \label{sect:docman}

DM  documents will follow the \gls{Systems Engineering} Guidelines of Rubin Observatory. PDF versions of released documents shall be deposited in \gls{DocuShare} in accordance with the Project's Document Management Plan \citedsp{LPM-51}.

An ``LDM-'' prefix on a document handle indicates that the document is change-controlled at the subsystem level; i.e., it may be released or modified only with the agreement of the DMCCB (\secref{sect:dmccb}). Uncontrolled documents, such as technical notes (prefix ``DMTN-''), may be released whenever the author decides it is appropriate (or when a release is requested by the Project Manager).

The document tree for DM is shown in \figref{fig:doctree}. This is not exhaustive, but serves to give a high level overview of the main documents in DM and the relationships between them.

\begin{figure}
\begin{center}
 \includegraphics[width=1.0\textwidth]{images/DocTree}
\caption{The document tree for the \gls{Data Management} subsystem.\label{fig:doctree}}
\end{center}
\end{figure}

\subsubsection{Draft Documents}

Draft DM documents will be kept in GitHub. A single repository per document will be maintained with the head revision containing the \emph{released} version which should match the version on \gls{DocuShare}.

Use of Google Docs or Confluence is tolerated but final delivered documents must conform to the standard \VRO~  format, and hence either produced with \gls{LaTeX}, using the lsst-texmf package\footnote{\url{https://lsst-texmf.lsst.io}}, or Word, using the appropriate Rubin template (\citeds{Document-9224}, \citeds{Document-11920}). The precursor document should then be erased with a pointer to the baseline document, stored in GitHub.

\subsubsection{End-User Documentation}

\begin{figure}
\begin{center}
 \includegraphics[width=1\textwidth]{images/EndUserDocs}
\caption{Outline of the web hierarchy for the DM end user documentation. \label{fig:eudoc}}
\end{center}
\end{figure}
%Figure from jsick

\figref{fig:doctree} has a single box for ``end user documentation''. However, appropriate web-based, user-focused documentation is regarded as a major DM deliverable.
End user documentation will be web-based, and will follow the hierarchy shown in \figref{fig:eudoc}.

\subsubsection{Data Facility Documentation}

\begin{figure}
\begin{center}
 \includegraphics[width=0.5\textwidth]{images/servdocs}
\caption{Outline of layered service architecture of the Data Facility. \label{fig:servdoc}}
\end{center}
\end{figure}

Service-level documentation follows the layered service architecture of the LSST Data Facility (see \figref{fig:servdoc}).

\paragraph{Cross-cutting Aspects of \gls{LDF} Services}

The cross-cutting aspects of the LSST Data Facility, \textit{security} and operational \textit{manageability}, are represented by the vertical boxes in Figure \ref{fig:servdoc}.
Documentation of these aspects describes policies, procedures, and supporting management frameworks, including:

\begin{enumerate}
	\item	\gls{LDF} service management framework: service catalog, service-level agreements (SLAs), \gls{configuration} management database (\gls{CMDB}), service \gls{monitoring}.
	\item	LDF service management processes and context in the overall project: incident response, request response, issue tracking, problem management and the problem management database, change management and change control authority, release management.
	\item	Overview of the security enclave structure
	\item	Security controls and incident response procedures
	\item	Disaster recovery and continuity policies
\end{enumerate}

\subsubsection{Documentation of Service Layers}

The box at the top of Figure \ref{fig:servdoc}, \textit{use cases}, represents subsystem-level and project-level operational use cases. The next layer, \textit{LDF-offered services}, represents specific services offered by the Data Facility which satisfy those use cases. Documentation of this layer includes:

\begin{enumerate}
\item	For each service, a concept of operations (ConOps) which summarizes how a service operates to satisfy a use case. The ConOps describes the operational characteristics of the production system, context within overall \VRO~ operations, and representative scenarios.Â 
\item	For each service, a theory of operations, which provides a mental model of a constructed system. The theory of operations explains how the constructed service both fulfills the ConOps and integrates with the cross-cutting aspects of the facility. The document describes the overall architecture of the service and dependency on supporting service layers; integration into aspects of computer security, information security and business continuity; and integration into incident reporting and response, availability and capacity management, and change management.
\end{enumerate}

The next two layers, \textit{reusable production services} and \textit{data, compute, and \gls{IT} security services}, represent tiers of supporting service. Documentation of these layers includes a theory of operations, as described above, explaining the dependencies on supporting service and \gls{ITC} layers, and integration with cross-cutting aspects of the facility.

The \textit{ITC} box represents hardware components supporting all \gls{LDF} services. Documentation of \gls{ITC} describes the system elements at all facility sites, a DM inistration within each security enclave and integration with security operations, the overall provisioning plan, \gls{ITC} system \gls{monitoring} and integration into the service \gls{monitoring} framework, and integration into service management processes including \gls{configuration} management and change management.

The \textit{software} box represents service software components being developed by the Data Facility.
Documentation of software elements follows the standards of the Rubin software \gls{stack}.

Documents are managed as \gls{configuration} items in the LSST Data Facility \gls{CMDB}.

\subsection {Configuration Control} \label{sect:config}

Configuration control of documents is addressed in \secref{sect:docman}. In this section, we consider instead how \gls{configuration} control is applied to operational systems and software development.

\subsubsection{Software Configuration Control}

DM  follows a \gls{git} based versioning system based on public \gls{git} repositories.  The approach is covered in the Developer Guide\footnote{\url{https://developer.lsst.io/processes/workflow.html}} and is consistent with the Project-level \gls{Systems Engineering} Management Plan \citeds{LSE-17}.
The \texttt{master} branch is the stable code with development done in \emph{ticket} branches (named with the id of the corresponding Jira Ticket describing the work).
Once reviewed a branch is merged to \texttt{master}, which should always be functional and releasable.
% \footnote{LSE-14 seem out of date and should be updated or revoked - titled a guideline it seems inappropriate as an LSE.}
Releases are recorded by tagging the \texttt{master} branch; release branches can be created if patches are required.

As we approach commissioning and operations DM will have much stricter \gls{configuration} control.
At this point there will be a version of the software which may need urgent patching, a next candidate release version of the software, and the \texttt{master}.
A \gls{patch} to the operational version will require the same fix to be made in the two other versions.
The role of the DM  \gls{Change Control Board} (\gls{DMCCB}; \secref{sect:dmccb}) becomes very important at this point to ensure only essential fixes make it to the live system as patches and that required features are included in planned releases.

We cannot escape the fact that we  will have multiple code branches to maintain in operations which will lead to an increase in work load.
Hence one should consider that perhaps more manpower may be needed in commissioning to cope with urgent software fixes while continuing development.
The other consideration would be that features to be developed post commissioning will probably be delayed more than one may think, as maintenance will take priority.\footnote{WOM identifies this as the maintenance surge.}

\subsubsection{Hardware Configuration Control}

On the hardware side we have multiple configurable items; we need to control which versions of software are on which machines. These days tooling like Puppet make this reasonably painless. Still the \gls{configuration}  must be carefully controlled to ensure reproducible deployments providing correct and reproducible results. The exact set of released software and other tools on each system should be held in a \gls{configuration} management database.
Changes to the \gls{configuration} should be endorsed by the \gls{DMCCB}.

The sizing model for compute hardware purchasing is detailed in \citeds{LDM-144}, \citeds{LDM-141}, and \citeds{LDM-138}.

\subsection {Release Management} \label{sect:release}

Three key documents describe DM's approach to software releases:

\begin{itemize}
\item{\citeds{LDM-672} defines the policies around making releases, in terms of versioning, licensing, etc;}
\item{\citeds{LDM-564} provides a schedule for major releases expected throughout the construction period;}
\item{\citeds{DMTN-106} specifies the procedures to be followed while carrying out a software release.}
\end{itemize}

The \gls{DMCCB} is responsible for synchronizing the release plan with project-wide milestones.
\footnote{As of January 2019 the release plan needs to be reviewed and the release milestones listed therein need to be made consistent with the scope of the document.
Issue \gls{DM}-17001 is tracking this activity.}

All releases will be identified by a release issue.

Any unscheduled release, major, minor or \gls{patch}, needs to be requested by the end user to the  DMCCB using a RFC  Jira issue. The RFC  shall contain:

\begin{itemize}
\item The justification for the release.
\item The date the release is requested to be available.
\item A list of proposed functionalities or fixes (Jira issues) which are requested to be implemented in the release.
\end{itemize}

The  DMCCB will assess the release request within one week. If the release is urgent,  DMCCB will assess it within 24 hours.
The  DMCCB will approve or reject the proposed release and add a comment to the RFC  with the reason of rejection or, in case of approval, with the following information:

\begin{itemize}
\item The release identifier (version number NN.nn ).
\item The estimated release date.
\item The list of Jira issues that will be included.
\end{itemize}


\subsection {Risk Management } \label{sect:risk}

Risks will be dealt with within the Rubin Project framework as defined in \citeds{LPM-20}.
Risks in DM may be sent to the DM \gls{Project Manager} or Deputy \gls{Project Manager} at any time for consideration to be included in the formal risk register (appropriately costed and weighted).
All risks are reviewed regularly by the DM \gls{Project Manager} and are discussed weekly at the regular DMLT  meetings.


\subsection {Quality Assurance  } \label{sect:pa}

In accordance with the project \gls{QA} plan \citedsp{LPM-55} we will perform \gls{QA} on the software products.
This work will mainly be carried out by \gls{SQuaRE} (\secref{sect:square}).
Quality assurance here means compliance with project guidelines for production, in our case for software production.
A part of this is to have a verification/validation plan(s) which in and of itself is a major task (see \secref{sect:vanv}).


\subsection{Action Items }
Actions in DM are tracked as Jira issues and periodically reviewed at DMLT  meetings.


\subsection {Verification and \gls{Validation} } \label{sect:vanv}

We intend to verify and validate as much of DM as we can before commissioning and operations.
This will be achieved through testing and operations rehearsals/data challenges.
The verification and validation approach is detailed in \citeds{LDM-503}, which includes a detailed discussion of the test schedule summarized in \figref{fig:schedule}.  The state of verification is given in the \gls{VCD} \citeds{LDM-692}.
