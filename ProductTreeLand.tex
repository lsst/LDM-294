%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Document:      DM  product tree
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass{article}
\usepackage{times,layouts}
\usepackage{tikz,hyperref,amsmath}
\usetikzlibrary{positioning,arrows,shapes,decorations.shapes,shapes.arrows}
\usetikzlibrary{backgrounds,calc}
\usepackage[paperwidth=167.4cm,paperheight=24.648000000000003cm,
left=-2mm,top=3mm,bottom=0mm,right=0mm,
noheadfoot,marginparwidth=0pt,includemp=false,
textwidth=30cm,textheight=50mm]{geometry}
\newcommand\showpage{%
\setlayoutscale{0.5}\setlabelfont{\tiny}\printheadingsfalse\printparametersfalse
\currentpage\pagedesign}
\hypersetup{pdftitle={DM products }, pdfsubject={Diagram illustrating the
products in LSST DM }, pdfauthor={ William O'Mullane}}
\tikzstyle{tbox}=[rectangle,text centered, text width=30mm]
\tikzstyle{wbbox}=[rectangle, rounded corners=3pt, draw=black, top color=blue!50!white, bottom color=white, very thick, minimum height=12mm, inner sep=2pt, text centered, text width=30mm]
\tikzstyle{pbox}=[rectangle, rounded corners=3pt, draw=black, top color=yellow!50!white, bottom color=white, very thick, minimum height=35pt, inner sep=2pt, text centered, text width=35mm]
\tikzstyle{pline}=[-, thick]
\begin{document}
\begin{tikzpicture}[node distance=0mm]
\node (DMSRV) [pbox, 
] {\textbf{Services} };
\node (DMSRVpkg) [tbox,below=3mm of DMSRV.north] {{\small \color{black} \begin{verbatim} 1 Services \end{verbatim} }  };
\node (DBBSRV) [pbox,right=15mm of DMSRV] {\textbf{DBB Services} };
\node [below right] at (DBBSRV.north west) {\small \color{blue}1.02C.07.07} ;
\node (DBBSRVpkg) [tbox,below=3mm of DBBSRV.north] {{\small \color{black} \begin{verbatim} 3 Backbone Services \end{verbatim} }  };
 \draw[pline] (DMSRV.east) -| ++(0.4,0) |- (DBBSRV.west); 
\node (DBBLIFESRV) [pbox,right=15mm of DBBSRV] {\textbf{DBB Lifetime} };
\node [below right] at (DBBLIFESRV.north west) {\small \color{blue}1.02C.07.07} ;
\node (DBBLIFESRVpkg) [tbox,below=3mm of DBBLIFESRV.north] {{\small \color{black} \begin{verbatim} 2 DBB Lifetime Management \end{verbatim} }  };
 \draw[pline] (DBBSRV.east) -| ++(0.4,0) |- (DBBLIFESRV.west); 
\node (DBBMDSRV) [pbox,below=4pt of DBBLIFESRV] {\textbf{DBB Metadata} };
\node [below right] at (DBBMDSRV.north west) {\small \color{blue}1.02C.07.07} ;
\node (DBBMDSRVpkg) [tbox,below=3mm of DBBMDSRV.north] {{\small \color{black} \begin{verbatim} 1 DBB Ingest/Metadata Management \end{verbatim} }  };
 \draw[pline] (DBBSRV.east) -| ++(0.4,0) |- (DBBMDSRV.west); 
\node (DBBSTRSRV) [pbox,below=4pt of DBBMDSRV] {\textbf{DBB Storage} };
\node [below right] at (DBBSTRSRV.north west) {\small \color{blue}1.02C.07.07} ;
\node (DBBSTRSRVpkg) [tbox,below=3mm of DBBSTRSRV.north] {{\small \color{black} \begin{verbatim} 4 DBB Storage \end{verbatim} }  };
 \draw[pline] (DBBSRV.east) -| ++(0.4,0) |- (DBBSTRSRV.west); 
\node (DBBTRSRV) [pbox,below=4pt of DBBSTRSRV] {\textbf{DBB Transport} };
\node [below right] at (DBBTRSRV.north west) {\small \color{blue}1.02C.07.07} ;
\node (DBBTRSRVpkg) [tbox,below=3mm of DBBTRSRV.north] {{\small \color{black} \begin{verbatim} 3 DBB Transport/Replication/Backup \end{verbatim} }  };
 \draw[pline] (DBBSRV.east) -| ++(0.4,0) |- (DBBTRSRV.west); 
\node (LSPSRV) [pbox,below=123pt of DBBSRV] {\textbf{LSP Services} };
\node (LSPSRVpkg) [tbox,below=3mm of LSPSRV.north] {{\small \color{black} \begin{verbatim} 4 LSP Services \end{verbatim} }  };
 \draw[pline] (DMSRV.east) -| ++(0.4,0) |- (LSPSRV.west); 
\node (LSPJLSRV) [pbox,right=15mm of LSPSRV] {\textbf{LSP JupyterLab} };
\node [below right] at (LSPJLSRV.north west) {\small \color{blue}1.02C.10.02.02} ;
\node (LSPJLSRVpkg) [tbox,below=3mm of LSPJLSRV.north] {{\small \color{black} \begin{verbatim} 3 LSP JupyterLab \end{verbatim} }  };
 \draw[pline] (LSPSRV.east) -| ++(0.4,0) |- (LSPJLSRV.west); 
\node (LSPPRTLSRV) [pbox,below=4pt of LSPJLSRV] {\textbf{LSP Portal} };
\node [below right] at (LSPPRTLSRV.north west) {\small \color{blue}1.02C.05.07,1.02C.05.08,1.02C.05.09} ;
\node (LSPPRTLSRVpkg) [tbox,below=3mm of LSPPRTLSRV.north] {{\small \color{black} \begin{verbatim} 2 LSP Portal \end{verbatim} }  };
 \draw[pline] (LSPSRV.east) -| ++(0.4,0) |- (LSPPRTLSRV.west); 
\node (LSPWEBSRV) [pbox,below=4pt of LSPPRTLSRV] {\textbf{LSP Web API} };
\node [below right] at (LSPWEBSRV.north west) {\small \color{blue}1.02C.06.02} ;
\node (LSPWEBSRVpkg) [tbox,below=3mm of LSPWEBSRV.north] {{\small \color{black} \begin{verbatim} 4 LSP Web API \end{verbatim} }  };
 \draw[pline] (LSPSRV.east) -| ++(0.4,0) |- (LSPWEBSRV.west); 
\node (OFFLSRV) [pbox,below=82pt of LSPSRV] {\textbf{Offline Services} };
\node (OFFLSRVpkg) [tbox,below=3mm of OFFLSRV.north] {{\small \color{black} \begin{verbatim} 2 Offline Services \end{verbatim} }  };
 \draw[pline] (DMSRV.east) -| ++(0.4,0) |- (OFFLSRV.west); 
\node (BULKDSRV) [pbox,right=15mm of OFFLSRV] {\textbf{Bulk Distrib} };
\node [below right] at (BULKDSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (BULKDSRVpkg) [tbox,below=3mm of BULKDSRV.north] {{\small \color{black} \begin{verbatim} 3 Bulk Distribution \end{verbatim} }  };
 \draw[pline] (OFFLSRV.east) -| ++(0.4,0) |- (BULKDSRV.west); 
\node (OFFLQCSRV) [pbox,below=4pt of BULKDSRV] {\textbf{Offline QC} };
\node [below right] at (OFFLQCSRV.north west) {\small \color{blue}1.02C.04.07} ;
\node (OFFLQCSRVpkg) [tbox,below=3mm of OFFLQCSRV.north] {{\small \color{black} \begin{verbatim} 2 Offline Quality Control \end{verbatim} }  };
 \draw[pline] (OFFLSRV.east) -| ++(0.4,0) |- (OFFLQCSRV.west); 
\node (PRODSRV) [pbox,below=4pt of OFFLQCSRV] {\textbf{Batch Production} };
\node [below right] at (PRODSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (PRODSRVpkg) [tbox,below=3mm of PRODSRV.north] {{\small \color{black} \begin{verbatim} 1 Batch Production \end{verbatim} }  };
 \draw[pline] (OFFLSRV.east) -| ++(0.4,0) |- (PRODSRV.west); 
\node (PRSRV) [pbox,below=82pt of OFFLSRV] {\textbf{Prompt Services} };
\node (PRSRVpkg) [tbox,below=3mm of PRSRV.north] {{\small \color{black} \begin{verbatim} 1 Prompt Services \end{verbatim} }  };
 \draw[pline] (DMSRV.east) -| ++(0.4,0) |- (PRSRV.west); 
\node (ALRTDSTSRV) [pbox,right=15mm of PRSRV] {\textbf{Alert Distrib} };
\node [below right] at (ALRTDSTSRV.north west) {\small \color{blue}1.02C.03.03} ;
\node (ALRTDSTSRVpkg) [tbox,below=3mm of ALRTDSTSRV.north] {{\small \color{black} \begin{verbatim} 7 Alert Distribution \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (ALRTDSTSRV.west); 
\node (ARCSRV) [pbox,below=4pt of ALRTDSTSRV] {\textbf{Archiving} };
\node [below right] at (ARCSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (ARCSRVpkg) [tbox,below=3mm of ARCSRV.north] {{\small \color{black} \begin{verbatim} 1 Archiving \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (ARCSRV.west); 
\node (OCSBATSRV) [pbox,below=4pt of ARCSRV] {\textbf{OCS Batch} };
\node [below right] at (OCSBATSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (OCSBATSRVpkg) [tbox,below=3mm of OCSBATSRV.north] {{\small \color{black} \begin{verbatim} 5 OCS-Driven Batch \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (OCSBATSRV.west); 
\node (OODSSRV) [pbox,below=4pt of OCSBATSRV] {\textbf{Obs Ops Data} };
\node [below right] at (OODSSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (OODSSRVpkg) [tbox,below=3mm of OODSSRV.north] {{\small \color{black} \begin{verbatim} 4 Observatory Operations Data \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (OODSSRV.west); 
\node (POPSRV) [pbox,below=4pt of OODSSRV] {\textbf{Planned Obs Pub} };
\node [below right] at (POPSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (POPSRVpkg) [tbox,below=3mm of POPSRV.north] {{\small \color{black} \begin{verbatim} 2 Planned Observation Publication \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (POPSRV.west); 
\node (PRPRCSRV) [pbox,below=4pt of POPSRV] {\textbf{Prompt Proc} };
\node [below right] at (PRPRCSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (PRPRCSRVpkg) [tbox,below=3mm of PRPRCSRV.north] {{\small \color{black} \begin{verbatim} 3 Prompt Processing \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (PRPRCSRV.west); 
\node (PRQCSRV) [pbox,below=4pt of PRPRCSRV] {\textbf{Prompt QC} };
\node [below right] at (PRQCSRV.north west) {\small \color{blue}1.02C.03.08} ;
\node (PRQCSRVpkg) [tbox,below=3mm of PRQCSRV.north] {{\small \color{black} \begin{verbatim} 8 Prompt Quality Control \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (PRQCSRV.west); 
\node (TMGSRV) [pbox,below=4pt of PRQCSRV] {\textbf{Telem Gateway} };
\node [below right] at (TMGSRV.north west) {\small \color{blue}1.02C.07.06.02} ;
\node (TMGSRVpkg) [tbox,below=3mm of TMGSRV.north] {{\small \color{black} \begin{verbatim} 6 Telemetry Gateway \end{verbatim} }  };
 \draw[pline] (PRSRV.east) -| ++(0.4,0) |- (TMGSRV.west); 
\node (DMSW) [pbox, 
right=12.4cm of DMSRV] {\textbf{Software Products} };
\node (DMSWpkg) [tbox,below=3mm of DMSW.north] {{\small \color{black} \begin{verbatim} 2 Software Products \end{verbatim} }  };
\node (BPP) [pbox,right=15mm of DMSW] {\textbf{Batch Prod SW} };
\node [below right] at (BPP.north west) {\small \color{blue}1.02C.07.08} ;
\node (BPPpkg) [tbox,below=3mm of BPP.north] {{\small \color{black} \begin{verbatim} 2 Batch Production Products \end{verbatim} }  };
 \draw[pline] (DMSW.east) -| ++(0.4,0) |- (BPP.west); 
\node (CMPGN) [pbox,right=15mm of BPP] {\textbf{Campaign Mgmt} };
\node [below right] at (CMPGN.north west) {\small \color{blue}1.02C.07.08} ;
\node (CMPGNpkg) [tbox,below=3mm of CMPGN.north] {{\small \color{black} \begin{verbatim} Campaign Management \end{verbatim} }  };
 \draw[pline] (BPP.east) -| ++(0.4,0) |- (CMPGN.west); 
\node (WLWF) [pbox,below=4pt of CMPGN] {\textbf{Workload/ flow} };
\node [below right] at (WLWF.north west) {\small \color{blue}1.02C.07.08} ;
\node (WLWFpkg) [tbox,below=3mm of WLWF.north] {{\small \color{black} \begin{verbatim} Workload/Workflow \end{verbatim} }  };
 \draw[pline] (BPP.east) -| ++(0.4,0) |- (WLWF.west); 
\node (DBB) [pbox,below=41pt of BPP] {\textbf{DBB SW} };
\node [below right] at (DBB.north west) {\small \color{blue}1.02C.07.08} ;
\node (DBBpkg) [tbox,below=3mm of DBB.north] {{\small \color{black} \begin{verbatim} 4 Backbone SW Products \end{verbatim} }  };
 \draw[pline] (DMSW.east) -| ++(0.4,0) |- (DBB.west); 
\node (DBBLIFE) [pbox,right=15mm of DBB] {\textbf{DBB Lifetime SW} };
\node [below right] at (DBBLIFE.north west) {\small \color{blue}1.02C.07.08} ;
\node (DBBLIFEpkg) [tbox,below=3mm of DBBLIFE.north] {{\small \color{black} \begin{verbatim} DBB Lifetime Management SW \end{verbatim} }  };
 \draw[pline] (DBB.east) -| ++(0.4,0) |- (DBBLIFE.west); 
\node (DBBMD) [pbox,below=4pt of DBBLIFE] {\textbf{DBB Meta SW} };
\node [below right] at (DBBMD.north west) {\small \color{blue}1.02C.07.08} ;
\node (DBBMDpkg) [tbox,below=3mm of DBBMD.north] {{\small \color{black} \begin{verbatim} DBB Ingest/Metadata Management SW \end{verbatim} }  };
 \draw[pline] (DBB.east) -| ++(0.4,0) |- (DBBMD.west); 
\node (DBBTR) [pbox,below=4pt of DBBMD] {\textbf{DBB Transport SW} };
\node [below right] at (DBBTR.north west) {\small \color{blue}1.02C.07.08} ;
\node (DBBTRpkg) [tbox,below=3mm of DBBTR.north] {{\small \color{black} \begin{verbatim} DBB Transport/Replication/Backup SW \end{verbatim} }  };
 \draw[pline] (DBB.east) -| ++(0.4,0) |- (DBBTR.west); 
\node (LSP) [pbox,below=82pt of DBB] {\textbf{LSP SW} };
\node (LSPpkg) [tbox,below=3mm of LSP.north] {{\small \color{black} \begin{verbatim} 5 LSP SW Products \end{verbatim} }  };
 \draw[pline] (DMSW.east) -| ++(0.4,0) |- (LSP.west); 
\node (LSPJL) [pbox,right=15mm of LSP] {\textbf{LSP JL SW} };
\node [below right] at (LSPJL.north west) {\small \color{blue}1.02C.10.02.02} ;
\node (LSPJLpkg) [tbox,below=3mm of LSPJL.north] {{\small \color{black} \begin{verbatim} 2 LSP JupyterLab SW \end{verbatim} }  };
 \draw[pline] (LSP.east) -| ++(0.4,0) |- (LSPJL.west); 
\node (LSPPRTL) [pbox,below=4pt of LSPJL] {\textbf{LSP Portal SW} };
\node [below right] at (LSPPRTL.north west) {\small \color{blue}1.02C.05.07,1.02C.05.08,1.02C.05.09} ;
\node (LSPPRTLpkg) [tbox,below=3mm of LSPPRTL.north] {{\small \color{black} \begin{verbatim} 1 LSP Portal and SUIT \end{verbatim} }  };
 \draw[pline] (LSP.east) -| ++(0.4,0) |- (LSPPRTL.west); 
\node (LSPWEB) [pbox,below=4pt of LSPPRTL] {\textbf{LSP Web SW} };
\node [below right] at (LSPWEB.north west) {\small \color{blue}1.02C.06.02} ;
\node (LSPWEBpkg) [tbox,below=3mm of LSPWEB.north] {{\small \color{black} \begin{verbatim} 3 LSP Web API SW \end{verbatim} }  };
 \draw[pline] (LSP.east) -| ++(0.4,0) |- (LSPWEB.west); 
\node (PR) [pbox,below=82pt of LSP] {\textbf{Prompt SW} };
\node [below right] at (PR.north west) {\small \color{blue}1.02C.07.08} ;
\node (PRpkg) [tbox,below=3mm of PR.north] {{\small \color{black} \begin{verbatim} 1 Prompt SW Products \end{verbatim} }  };
 \draw[pline] (DMSW.east) -| ++(0.4,0) |- (PR.west); 
\node (ALRTDSTR) [pbox,right=15mm of PR] {\textbf{Alert Distrib SW} };
\node [below right] at (ALRTDSTR.north west) {\small \color{blue}1.02C.03.03} ;
\node (ALRTDSTRpkg) [tbox,below=3mm of ALRTDSTR.north] {{\small \color{black} \begin{verbatim} Alert Distribution SW \end{verbatim} }  };
 \draw[pline] (PR.east) -| ++(0.4,0) |- (ALRTDSTR.west); 
\node (EFDT) [pbox,below=4pt of ALRTDSTR] {\textbf{EFD Transform} };
\node [below right] at (EFDT.north west) {\small \color{blue}1.02C.07.08} ;
\node (EFDTpkg) [tbox,below=3mm of EFDT.north] {{\small \color{black} \begin{verbatim} EFD Transformation \end{verbatim} }  };
 \draw[pline] (PR.east) -| ++(0.4,0) |- (EFDT.west); 
\node (HEADER) [pbox,below=4pt of EFDT] {\textbf{Header Srv SW} };
\node [below right] at (HEADER.north west) {\small \color{blue}1.02C.07.08} ;
\node (HEADERpkg) [tbox,below=3mm of HEADER.north] {{\small \color{black} \begin{verbatim} Header Service SW \end{verbatim} }  };
 \draw[pline] (PR.east) -| ++(0.4,0) |- (HEADER.west); 
\node (IIP) [pbox,below=4pt of HEADER] {\textbf{Image Ingest SW} };
\node [below right] at (IIP.north west) {\small \color{blue}1.02C.07.08} ;
\node (IIPpkg) [tbox,below=3mm of IIP.north] {{\small \color{black} \begin{verbatim} ctrl_iip \end{verbatim} }  };
 \draw[pline] (PR.east) -| ++(0.4,0) |- (IIP.west); 
\node (OBSPUB) [pbox,below=4pt of IIP] {\textbf{Plan Obs Pub SW} };
\node [below right] at (OBSPUB.north west) {\small \color{blue}1.02C.07.08} ;
\node (OBSPUBpkg) [tbox,below=3mm of OBSPUB.north] {{\small \color{black} \begin{verbatim} Planned Observation Publication SW \end{verbatim} }  };
 \draw[pline] (PR.east) -| ++(0.4,0) |- (OBSPUB.west); 
\node (OCSBAT) [pbox,below=4pt of OBSPUB] {\textbf{OCS Batch SW} };
\node [below right] at (OCSBAT.north west) {\small \color{blue}1.02C.07.08} ;
\node (OCSBATpkg) [tbox,below=3mm of OCSBAT.north] {{\small \color{black} \begin{verbatim} OCS Batch SW \end{verbatim} }  };
 \draw[pline] (PR.east) -| ++(0.4,0) |- (OCSBAT.west); 
\node (OODS) [pbox,below=4pt of OCSBAT] {\textbf{Obs Ops Data SW} };
\node [below right] at (OODS.north west) {\small \color{blue}1.02C.07.08} ;
\node (OODSpkg) [tbox,below=3mm of OODS.north] {{\small \color{black} \begin{verbatim} Observatory Operations Data Service SW \end{verbatim} }  };
 \draw[pline] (PR.east) -| ++(0.4,0) |- (OODS.west); 
\node (PRODN) [pbox,below=246pt of PR] {\textbf{Sci Pipelines SW} };
\node (PRODNpkg) [tbox,below=3mm of PRODN.north] {{\small \color{black} \begin{verbatim} 6 Science Pipeline SW Products \end{verbatim} }  };
 \draw[pline] (DMSW.east) -| ++(0.4,0) |- (PRODN.west); 
\node (APPRMPT) [pbox,right=15mm of PRODN] {\textbf{Alert Prod SW} };
\node [below right] at (APPRMPT.north west) {\small \color{blue}1.02C.03} ;
\node (APPRMPTpkg) [tbox,below=3mm of APPRMPT.north] {{\small \color{black} \begin{verbatim} 1 Alert Production \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (APPRMPT.west); 
\node (CALDAILY) [pbox,below=4pt of APPRMPT] {\textbf{Daily Calib SW} };
\node [below right] at (CALDAILY.north west) {\small \color{blue}1.02C.04.02} ;
\node (CALDAILYpkg) [tbox,below=3mm of CALDAILY.north] {{\small \color{black} \begin{verbatim} 4 Daily Calibration Update \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (CALDAILY.west); 
\node (CALOFFL) [pbox,below=4pt of CALDAILY] {\textbf{Period Calib SW} };
\node [below right] at (CALOFFL.north west) {\small \color{blue}1.02C.04.02} ;
\node (CALOFFLpkg) [tbox,below=3mm of CALOFFL.north] {{\small \color{black} \begin{verbatim} 5 Periodic Calibration \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (CALOFFL.west); 
\node (CALPRMPT) [pbox,below=4pt of CALOFFL] {\textbf{Raw Calib SW} };
\node [below right] at (CALPRMPT.north west) {\small \color{blue}1.02C.04.02} ;
\node (CALPRMPTpkg) [tbox,below=3mm of CALPRMPT.north] {{\small \color{black} \begin{verbatim} 3 Raw Calibration Validation \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (CALPRMPT.west); 
\node (CALYEAR) [pbox,below=4pt of CALPRMPT] {\textbf{Annual Calib SW} };
\node [below right] at (CALYEAR.north west) {\small \color{blue}1.02C.04.02} ;
\node (CALYEARpkg) [tbox,below=3mm of CALYEAR.north] {{\small \color{black} \begin{verbatim} 8 Annual Calibration \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (CALYEAR.west); 
\node (DRP) [pbox,below=4pt of CALYEAR] {\textbf{DR Prod SW} };
\node [below right] at (DRP.north west) {\small \color{blue}1.02C.04} ;
\node (DRPpkg) [tbox,below=3mm of DRP.north] {{\small \color{black} \begin{verbatim} 9 Data Release Production \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (DRP.west); 
\node (MOPS) [pbox,below=4pt of DRP] {\textbf{MOPS SW} };
\node [below right] at (MOPS.north west) {\small \color{blue}1.02C.03.06} ;
\node (MOPSpkg) [tbox,below=3mm of MOPS.north] {{\small \color{black} \begin{verbatim} 2 MOPS and Forced Photometry \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (MOPS.west); 
\node (SP) [pbox,below=4pt of MOPS] {\textbf{Spec Prog SW} };
\node [below right] at (SP.north west) {\small \color{blue}1.02C.03,1.02C.04} ;
\node (SPpkg) [tbox,below=3mm of SP.north] {{\small \color{black} \begin{verbatim} 6 Special Programs Productions \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (SP.west); 
\node (TMPLGEN) [pbox,below=4pt of SP] {\textbf{Tmpl Gen SW} };
\node [below right] at (TMPLGEN.north west) {\small \color{blue}1.02C.04.04} ;
\node (TMPLGENpkg) [tbox,below=3mm of TMPLGEN.north] {{\small \color{black} \begin{verbatim} 7 Template Generation \end{verbatim} }  };
 \draw[pline] (PRODN.east) -| ++(0.4,0) |- (TMPLGEN.west); 
\node (QC) [pbox,below=328pt of PRODN] {\textbf{QC Products} };
\node [below right] at (QC.north west) {\small \color{blue}1.02C.10.02.01} ;
\node (QCpkg) [tbox,below=3mm of QC.north] {{\small \color{black} \begin{verbatim} 3 Quality Control Products \end{verbatim} }  };
 \draw[pline] (DMSW.east) -| ++(0.4,0) |- (QC.west); 
\node (QCSW) [pbox,right=15mm of QC] {\textbf{Quality Ctrl SW} };
\node [below right] at (QCSW.north west) {\small \color{blue}1.02C.10.02.01} ;
\node (QCSWpkg) [tbox,below=3mm of QCSW.north] {{\small \color{black} \begin{verbatim} 3 Quality Control SW \end{verbatim} }  };
 \draw[pline] (QC.east) -| ++(0.4,0) |- (QCSW.west); 
\node (SUPPSW) [pbox,below=0pt of QC] {\textbf{Supporting SW} };
\node (SUPPSWpkg) [tbox,below=3mm of SUPPSW.north] {{\small \color{black} \begin{verbatim} 7 Supporting SW Products \end{verbatim} }  };
 \draw[pline] (DMSW.east) -| ++(0.4,0) |- (SUPPSW.west); 
\node (ADQL) [pbox,right=15mm of SUPPSW] {\textbf{ADQL Translator} };
\node [below right] at (ADQL.north west) {\small \color{blue}1.02C.06.02.05} ;
\node (ADQLpkg) [tbox,below=3mm of ADQL.north] {{\small \color{black} \begin{verbatim} 5 ADQL Translator \end{verbatim} }  };
 \draw[pline] (SUPPSW.east) -| ++(0.4,0) |- (ADQL.west); 
\node (BUTLER) [pbox,below=4pt of ADQL] {\textbf{Data Butler} };
\node [below right] at (BUTLER.north west) {\small \color{blue}1.02C.06.02.01} ;
\node (BUTLERpkg) [tbox,below=3mm of BUTLER.north] {{\small \color{black} \begin{verbatim} 2 Data Butler \end{verbatim} }  };
 \draw[pline] (SUPPSW.east) -| ++(0.4,0) |- (BUTLER.west); 
\node (DAXIMG) [pbox,below=4pt of BUTLER] {\textbf{Image Server} };
\node [below right] at (DAXIMG.north west) {\small \color{blue}1.02C.06.02.04} ;
\node (DAXIMGpkg) [tbox,below=3mm of DAXIMG.north] {{\small \color{black} \begin{verbatim} 7 Image/Cutout Server \end{verbatim} }  };
 \draw[pline] (SUPPSW.east) -| ++(0.4,0) |- (DAXIMG.west); 
\node (FIREFLY) [pbox,below=4pt of DAXIMG] {\textbf{Firefly} };
\node [below right] at (FIREFLY.north west) {\small \color{blue}1.02C.05.06} ;
\node (FIREFLYpkg) [tbox,below=3mm of FIREFLY.north] {{\small \color{black} \begin{verbatim} 6 Firefly \end{verbatim} }  };
 \draw[pline] (SUPPSW.east) -| ++(0.4,0) |- (FIREFLY.west); 
\node (QSERV) [pbox,below=4pt of FIREFLY] {\textbf{Distrib Database} };
\node [below right] at (QSERV.north west) {\small \color{blue}1.02C.06.02.03} ;
\node (QSERVpkg) [tbox,below=3mm of QSERV.north] {{\small \color{black} \begin{verbatim} 4 Distributed Database \end{verbatim} }  };
 \draw[pline] (SUPPSW.east) -| ++(0.4,0) |- (QSERV.west); 
\node (SCIPIPE) [pbox,below=4pt of QSERV] {\textbf{Sci Pipelines Libs} };
\node [below right] at (SCIPIPE.north west) {\small \color{blue}1.02C.03,1.02C.04} ;
\node (SCIPIPEpkg) [tbox,below=3mm of SCIPIPE.north] {{\small \color{black} \begin{verbatim} 1 Science Pipelines Libraries \end{verbatim} }  };
 \draw[pline] (SUPPSW.east) -| ++(0.4,0) |- (SCIPIPE.west); 
\node (TXF) [pbox,below=4pt of SCIPIPE] {\textbf{Task Framework} };
\node [below right] at (TXF.north west) {\small \color{blue}1.02C.06.03} ;
\node (TXFpkg) [tbox,below=3mm of TXF.north] {{\small \color{black} \begin{verbatim} 3 Task Framework \end{verbatim} }  };
 \draw[pline] (SUPPSW.east) -| ++(0.4,0) |- (TXF.west); 
\node (HWCOTS) [pbox, 
right=12.4cm of DMSW] {\textbf{HW and COTS SW} };
\node (HWCOTSpkg) [tbox,below=3mm of HWCOTS.north] {{\small \color{black} \begin{verbatim} 4 Hardware and COTS SW \end{verbatim} }  };
\node (COTS) [pbox,right=15mm of HWCOTS] {\textbf{COTS SW} };
\node (COTSpkg) [tbox,below=3mm of COTS.north] {{\small \color{black} \begin{verbatim} 4 COTS and 3rd Party SW \end{verbatim} }  };
 \draw[pline] (HWCOTS.east) -| ++(0.4,0) |- (COTS.west); 
\node (CILOGON) [pbox,right=15mm of COTS] {\textbf{CILogon} };
\node (CILOGONpkg) [tbox,below=3mm of CILOGON.north] {{\small \color{black} \begin{verbatim} CILogon \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (CILOGON.west); 
\node (DOCKER) [pbox,below=4pt of CILOGON] {\textbf{Docker} };
\node (DOCKERpkg) [tbox,below=3mm of DOCKER.north] {{\small \color{black} \begin{verbatim} Docker \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (DOCKER.west); 
\node (GPFS) [pbox,below=4pt of DOCKER] {\textbf{GPFS} };
\node (GPFSpkg) [tbox,below=3mm of GPFS.north] {{\small \color{black} \begin{verbatim} GPFS \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (GPFS.west); 
\node (GRAFANA) [pbox,below=4pt of GPFS] {\textbf{Grafana} };
\node (GRAFANApkg) [tbox,below=3mm of GRAFANA.north] {{\small \color{black} \begin{verbatim} Grafana \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (GRAFANA.west); 
\node (HTCONDOR) [pbox,below=4pt of GRAFANA] {\textbf{HTCondor} };
\node (HTCONDORpkg) [tbox,below=3mm of HTCONDOR.north] {{\small \color{black} \begin{verbatim} HTCondor \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (HTCONDOR.west); 
\node (K8S) [pbox,below=4pt of HTCONDOR] {\textbf{Kubernetes} };
\node (K8Spkg) [tbox,below=3mm of K8S.north] {{\small \color{black} \begin{verbatim} Kubernetes \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (K8S.west); 
\node (ORACLE) [pbox,below=4pt of K8S] {\textbf{Oracle} };
\node (ORACLEpkg) [tbox,below=3mm of ORACLE.north] {{\small \color{black} \begin{verbatim} Oracle \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (ORACLE.west); 
\node (PUPPET) [pbox,below=4pt of ORACLE] {\textbf{Puppet} };
\node (PUPPETpkg) [tbox,below=3mm of PUPPET.north] {{\small \color{black} \begin{verbatim} Puppet \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (PUPPET.west); 
\node (SECURITY) [pbox,below=4pt of PUPPET] {\textbf{IT Security} };
\node (SECURITYpkg) [tbox,below=3mm of SECURITY.north] {{\small \color{black} \begin{verbatim} SW Prd. for IT Security Service \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (SECURITY.west); 
\node (VSPHERE) [pbox,below=4pt of SECURITY] {\textbf{vSphere} };
\node (VSPHEREpkg) [tbox,below=3mm of VSPHERE.north] {{\small \color{black} \begin{verbatim} vSphere \end{verbatim} }  };
 \draw[pline] (COTS.east) -| ++(0.4,0) |- (VSPHERE.west); 
\node (HWCOMP) [pbox,below=369pt of COTS] {\textbf{Compute Nodes} };
\node [below right] at (HWCOMP.north west) {\small \color{blue}1.02C.07.09} ;
\node (HWCOMPpkg) [tbox,below=3mm of HWCOMP.north] {{\small \color{black} \begin{verbatim} 1 Compute Nodes \end{verbatim} }  };
 \draw[pline] (HWCOTS.east) -| ++(0.4,0) |- (HWCOMP.west); 
\node (DELL8) [pbox,right=15mm of HWCOMP] {\textbf{Blade (e.g.)} };
\node [below right] at (DELL8.north west) {\small \color{blue}1.02C.07.09} ;
\node (DELL8pkg) [tbox,below=3mm of DELL8.north] {{\small \color{black} \begin{verbatim} Dell blade 8 cores 16 GB ram \end{verbatim} }  };
 \draw[pline] (HWCOMP.east) -| ++(0.4,0) |- (DELL8.west); 
\node (HWNET) [pbox,below=0pt of HWCOMP] {\textbf{Network Nodes} };
\node [below right] at (HWNET.north west) {\small \color{blue}1.02C.07.09} ;
\node (HWNETpkg) [tbox,below=3mm of HWNET.north] {{\small \color{black} \begin{verbatim} 3 Network Nodes \end{verbatim} }  };
 \draw[pline] (HWCOTS.east) -| ++(0.4,0) |- (HWNET.west); 
\node (NETX) [pbox,right=15mm of HWNET] {\textbf{Router (e.g.)} };
\node [below right] at (NETX.north west) {\small \color{blue}1.02C.07.09} ;
\node (NETXpkg) [tbox,below=3mm of NETX.north] {{\small \color{black} \begin{verbatim} Network Component X \end{verbatim} }  };
 \draw[pline] (HWNET.east) -| ++(0.4,0) |- (NETX.west); 
\node (HWSTOR) [pbox,below=0pt of HWNET] {\textbf{Storage Nodes} };
\node [below right] at (HWSTOR.north west) {\small \color{blue}1.02C.07.09} ;
\node (HWSTORpkg) [tbox,below=3mm of HWSTOR.north] {{\small \color{black} \begin{verbatim} 2 Storage Nodes \end{verbatim} }  };
 \draw[pline] (HWCOTS.east) -| ++(0.4,0) |- (HWSTOR.west); 
\node (SAN2) [pbox,right=15mm of HWSTOR] {\textbf{Disk (e.g.)} };
\node [below right] at (SAN2.north west) {\small \color{blue}1.02C.07.09} ;
\node (SAN2pkg) [tbox,below=3mm of SAN2.north] {{\small \color{black} \begin{verbatim} SAN disk 2TB storage \end{verbatim} }  };
 \draw[pline] (HWSTOR.east) -| ++(0.4,0) |- (SAN2.west); 
\node (LLSW) [pbox,below=0pt of HWSTOR] {\textbf{Low Level SW} };
\node (LLSWpkg) [tbox,below=3mm of LLSW.north] {{\small \color{black} \begin{verbatim} 5 Low Level SW \end{verbatim} }  };
 \draw[pline] (HWCOTS.east) -| ++(0.4,0) |- (LLSW.west); 
\node (CENTOS) [pbox,right=15mm of LLSW] {\textbf{OS (e.g.)} };
\node (CENTOSpkg) [tbox,below=3mm of CENTOS.north] {{\small \color{black} \begin{verbatim} RedHat CentOS 7.4 \end{verbatim} }  };
 \draw[pline] (LLSW.east) -| ++(0.4,0) |- (CENTOS.west); 
\node (INFRA) [pbox, 
right=12.4cm of HWCOTS] {\textbf{Infrastructure} };
\node (INFRApkg) [tbox,below=3mm of INFRA.north] {{\small \color{black} \begin{verbatim} 3 Infrastructure \end{verbatim} }  };
\node (ENC) [pbox,right=15mm of INFRA] {\textbf{Enclaves} };
\node (ENCpkg) [tbox,below=3mm of ENC.north] {{\small \color{black} \begin{verbatim} 3 Enclaves \end{verbatim} }  };
 \draw[pline] (INFRA.east) -| ++(0.4,0) |- (ENC.west); 
\node (ENCARCB) [pbox,right=15mm of ENC] {\textbf{Arch Base Encl} };
\node [below right] at (ENCARCB.north west) {\small \color{blue}1.02C.08.01} ;
\node (ENCARCBpkg) [tbox,below=3mm of ENCARCB.north] {{\small \color{black} \begin{verbatim} Archive Base Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCARCB.west); 
\node (ENCARCN) [pbox,below=4pt of ENCARCB] {\textbf{Arch NCSA Encl} };
\node [below right] at (ENCARCN.north west) {\small \color{blue}1.02C.07.09} ;
\node (ENCARCNpkg) [tbox,below=3mm of ENCARCN.north] {{\small \color{black} \begin{verbatim} Archive NCSA Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCARCN.west); 
\node (ENCCOMM) [pbox,below=4pt of ENCARCN] {\textbf{Comm Clust Encl} };
\node [below right] at (ENCCOMM.north west) {\small \color{blue}1.02C.08.01} ;
\node (ENCCOMMpkg) [tbox,below=3mm of ENCCOMM.north] {{\small \color{black} \begin{verbatim} Commissioning Cluster Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCCOMM.west); 
\node (ENCDACC) [pbox,below=4pt of ENCCOMM] {\textbf{DAC Chile Encl} };
\node [below right] at (ENCDACC.north west) {\small \color{blue}1.02C.08.02} ;
\node (ENCDACCpkg) [tbox,below=3mm of ENCDACC.north] {{\small \color{black} \begin{verbatim} DAC Chile Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCDACC.west); 
\node (ENCDACU) [pbox,below=4pt of ENCDACC] {\textbf{DAC US Encl} };
\node [below right] at (ENCDACU.north west) {\small \color{blue}1.02C.07.09} ;
\node (ENCDACUpkg) [tbox,below=3mm of ENCDACU.north] {{\small \color{black} \begin{verbatim} DAC US Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCDACU.west); 
\node (ENCOFFL) [pbox,below=4pt of ENCDACU] {\textbf{Offline Prod Encl} };
\node [below right] at (ENCOFFL.north west) {\small \color{blue}1.02C.07.09} ;
\node (ENCOFFLpkg) [tbox,below=3mm of ENCOFFL.north] {{\small \color{black} \begin{verbatim} Offline Production Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCOFFL.west); 
\node (ENCPRB) [pbox,below=4pt of ENCOFFL] {\textbf{Prmpt Base Encl} };
\node [below right] at (ENCPRB.north west) {\small \color{blue}1.02C.08.01} ;
\node (ENCPRBpkg) [tbox,below=3mm of ENCPRB.north] {{\small \color{black} \begin{verbatim} Prompt Base Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCPRB.west); 
\node (ENCPRN) [pbox,below=4pt of ENCPRB] {\textbf{Prmpt NCSA Encl} };
\node [below right] at (ENCPRN.north west) {\small \color{blue}1.02C.07.09} ;
\node (ENCPRNpkg) [tbox,below=3mm of ENCPRN.north] {{\small \color{black} \begin{verbatim} Prompt NCSA Enclave \end{verbatim} }  };
 \draw[pline] (ENC.east) -| ++(0.4,0) |- (ENCPRN.west); 
\node (FAC) [pbox,below=287pt of ENC] {\textbf{Facilities} };
\node (FACpkg) [tbox,below=3mm of FAC.north] {{\small \color{black} \begin{verbatim} 2 Facilities \end{verbatim} }  };
 \draw[pline] (INFRA.east) -| ++(0.4,0) |- (FAC.west); 
\node (FACBASE) [pbox,right=15mm of FAC] {\textbf{Base Facility} };
\node [below right] at (FACBASE.north west) {\small \color{blue}1.02C.08.01,1.02C.08.02} ;
\node (FACBASEpkg) [tbox,below=3mm of FACBASE.north] {{\small \color{black} \begin{verbatim} Base Facility \end{verbatim} }  };
 \draw[pline] (FAC.east) -| ++(0.4,0) |- (FACBASE.west); 
\node (FACNCSA) [pbox,below=4pt of FACBASE] {\textbf{NCSA Facility} };
\node [below right] at (FACNCSA.north west) {\small \color{blue}1.02C.07.09} ;
\node (FACNCSApkg) [tbox,below=3mm of FACNCSA.north] {{\small \color{black} \begin{verbatim} NCSA Facility \end{verbatim} }  };
 \draw[pline] (FAC.east) -| ++(0.4,0) |- (FACNCSA.west); 
\node (NET) [pbox,below=41pt of FAC] {\textbf{Networks} };
\node (NETpkg) [tbox,below=3mm of NET.north] {{\small \color{black} \begin{verbatim} 1 Networks \end{verbatim} }  };
 \draw[pline] (INFRA.east) -| ++(0.4,0) |- (NET.west); 
\node (NETBA) [pbox,right=15mm of NET] {\textbf{Base/ Arch Net} };
\node [below right] at (NETBA.north west) {\small \color{blue}1.02C.08.03} ;
\node (NETBApkg) [tbox,below=3mm of NETBA.north] {{\small \color{black} \begin{verbatim} 2 Base to Archive Network \end{verbatim} }  };
 \draw[pline] (NET.east) -| ++(0.4,0) |- (NETBA.west); 
\node (NETBASE) [pbox,below=4pt of NETBA] {\textbf{Base LAN} };
\node [below right] at (NETBASE.north west) {\small \color{blue}1.02C.07.08} ;
\node (NETBASEpkg) [tbox,below=3mm of NETBASE.north] {{\small \color{black} \begin{verbatim} 3 Base LAN Network \end{verbatim} }  };
 \draw[pline] (NET.east) -| ++(0.4,0) |- (NETBASE.west); 
\node (NETMGMT) [pbox,below=4pt of NETBASE] {\textbf{Net Mgmt} };
\node [below right] at (NETMGMT.north west) {\small \color{blue}1.02C.08.03} ;
\node (NETMGMTpkg) [tbox,below=3mm of NETMGMT.north] {{\small \color{black} \begin{verbatim} 5 Network Management \end{verbatim} }  };
 \draw[pline] (NET.east) -| ++(0.4,0) |- (NETMGMT.west); 
\node (NETNCSA) [pbox,below=4pt of NETMGMT] {\textbf{NCSA LAN} };
\node [below right] at (NETNCSA.north west) {\small \color{blue}1.02C.07.09} ;
\node (NETNCSApkg) [tbox,below=3mm of NETNCSA.north] {{\small \color{black} \begin{verbatim} 4 NCSA LAN Network \end{verbatim} }  };
 \draw[pline] (NET.east) -| ++(0.4,0) |- (NETNCSA.west); 
\node (NETSB) [pbox,below=4pt of NETNCSA] {\textbf{Sum/ Base Net} };
\node [below right] at (NETSB.north west) {\small \color{blue}1.02C.08.03} ;
\node (NETSBpkg) [tbox,below=3mm of NETSB.north] {{\small \color{black} \begin{verbatim} 1 Summit to Base Network \end{verbatim} }  };
 \draw[pline] (NET.east) -| ++(0.4,0) |- (NETSB.west); 
\node (DM) [wbbox, above=15mm of HWCOTS]{\textbf{Data Management}};
 \draw[pline]   (DMSRV.north) -- ++(0.0,0.5) -| (DM.south) ; 
 \draw[pline]   (DMSW.north) -- ++(0.0,0.5) -| (DM.south) ; 
 \draw[pline]   (HWCOTS.north) -- ++(0.0,0.5) -| (DM.south) ; 
 \draw[pline]   (INFRA.north) -- ++(0.0,0.5) -| (DM.south) ; 
\end{tikzpicture}
\end{document}
